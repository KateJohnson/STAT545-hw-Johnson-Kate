gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), rangeGDP= max.GDP-min.GDP)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(continent)) + geom_bar(aes(max.GDP))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) + geom_bar(y=aes(max.GDP))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot() + geom_bar(y=aes(x=continent, y=max.GDP))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot() + geom_bar(aes(x=continent, y=max.GDP))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot() + geom_bar(aes(x=continent, y=max.GDP), data=gapminder)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot() + geom_bar(aes(x=continent, y=max.GDP))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent, y=max.GDP) + geom_bar())
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent, y=max.GDP)) + geom_bar()
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent, y=max.GDP)) + geom_bar(stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) + geom_bar(aes(y=max.GDP), stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) + geom_bar(aes(y=max.GDP), stat="identity") + geom_bar(aes(y=min.GDP), stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=max.GDP), stat="identity") +
geom_bar(aes(y=min.GDP), stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=min.GDP), stat="identity") +
geom_bar(aes(y=min.GDP), stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=c(max.GDP, min.GDP)), stat="identity")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=c(max.GDP, min.GDP)), stat="identity") +
geom_bar(aes(y=min.GDP), stat="identity", position="dodge")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=max.GDP), stat="identity") +
geom_bar(aes(y=min.GDP), stat="identity", position="dodge")
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=max.GDP), stat="identity") +
geom_bar(aes(y=min.GDP), stat="identity", position=position_dodge())
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
ggplot(aes(x=continent)) +
geom_bar(aes(y=max.GDP), stat="identity", position=position_dodge()) +
geom_bar(aes(y=min.GDP), stat="identity", position=position_dodge())
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap))
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
melt(id=c("continent")
gapminder %>%
mmGDP <- gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap)) %>%
arrange(max.GDP)
mmGDP
knitr::kable(mmGDP, digits=0, col.names=c("Continent","Maximum per capita GDP","Minimum per capita GDP"))
mmGDP
melt(mmGDP, continent)
library(reshape2)
melt(mmGDP, continent)
mmGDP
melt(mmGDP, continent="continent")
melt(mmGDP, id="continent")
mmGDP.plot <- melt(mmGDP, id="continent")
mmGDP.plot
ggplot(mmGDP.plot, aes(x=continent, y=value), fill=variable) +
geom_bar(position="dodge")
ggplot(mmGDP.plot, aes(x=continent, y=value), fill=variable) +
geom_bar(position="dodge", stat="identity")
mmGDP.plo
mmGDP.plot
ggplot(mmGDP.plot, aes(x=continent, y=value, fill=variable)) +
geom_bar(position="dodge", stat="identity")
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity")
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("A")
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent")
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
theme_classic()
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
theme(legend.title=element_blank()) + scale_fill_discrete(labels=c("maximum GDP","minimum GDP"))+
theme_classic()
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
scale_fill_discrete(name="", labels=c("maximum GDP","minimum GDP"))+
theme_classic()
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
scale_fill_discrete(name="", labels=c("maximum","minimum"))+
theme_classic()
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
scale_fill_discrete(name="", labels=c("maximum","minimum"))+
theme_classic()
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), range=max.GDP-min.GDP)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), range=max.GDP-min.GDP) %>%
arrange(range)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), range=max.GDP-min.GDP) %>%
arrange(range, desc)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), range=max.GDP-min.GDP) %>%
arrange(range, desc=F)
gapminder %>%
group_by(continent) %>%
summarise(max.GDP= max(gdpPercap), min.GDP= min(gdpPercap), range=max.GDP-min.GDP) %>%
arrange(desc(range))
ggplot(mmGDP.plot, aes(x=continent, y=log10(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
scale_fill_discrete(name="", labels=c("maximum","minimum"))+
theme_classic()
gapminder
ggplot(gapminder, aes(x=year, y=lifeExp)) + geom_point()
ggplot(gapminder, aes(x=year, y=lifeExp)) + geom_point() + facet_grid(. ~continent)
ggplot(gapminder, aes(x=year, y=mean(lifeExp)) +
geom_point() +
facet_grid(. ~continent)
ggplot(gapminder, aes(x=year, y=mean(lifeExp))) +
ggplot(gapminder, aes(x=year, y=mean(lifeExp))) +
geom_point() +
facet_grid(. ~continent)
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent)
ggplot(mmGDP.plot, aes(x=continent, y=(value), fill=variable)) +
geom_bar(position="dodge", stat="identity") +
ylab("Per capita GDP (log transformed)") + xlab("Continent") +
scale_fill_discrete(name="", labels=c("maximum","minimum"))+
theme_classic()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) +
ylab("Life Expectancy") + xlab("Year") +
theme_classic()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) +
ylab("Life Expectancy") + xlab("Year") +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) +
geom_smooth(method="loess")
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) +
geom_smooth(method="loess")
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) +
geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,2010,20)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,2000,20)) +
theme_bw()
gapminder$year
range(gapminder$year)
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,2007,20)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,max(gapminder$year),15)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,max(gapminder$year),10)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,max(gapminder$year),15)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,2010,15)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,max(gapminder$year),15)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") +
scale_x_continuous(breaks=seq(min(gapminder$year),max(gapminder$year),15)) +
theme_bw()
ggplot(gapminder, aes(x=year, y=lifeExp)) +
geom_point() +
facet_grid(. ~continent) + geom_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Year") + scale_x_continuous(breaks=seq(1950,2010,15)) +
theme_bw()
gapminder %>%
group_by(continent) %>%
summarise(avg.le= mean(lifeExp))
gapminder %>%
group_by(continent, year) %>%
summarise(avg.le= mean(lifeExp))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(min(year), max(year),15)))
min(year)
seq(min(gapminder$year), max(gapminder$year),15)
min(gapminder$year)
max(gapminder$year)
(min(gapminder$year), max(gapminder$year),10)
seq(min(gapminder$year), max(gapminder$year),10)
seq(1950,2010,10
breaks=seq(1950,2010,10)
eq(1950,2010,10)
seq(1950,2010,10)
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10)))
gapminder %>%
mutate(year.bin= cut(year, breaks=quantile(year, probs=seq(1950,2010,10))))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10)))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10))) %>%
group_by(continent, year) %>%
summarise(avg.le= mean(lifeExp))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10))) %>%
group_by(continent, year.bin) %>%
summarise(avg.le= mean(lifeExp))
avg.LE <- gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10))) %>%
group_by(continent, year.bin) %>%
summarise(avg.le= mean(lifeExp))
knitr::kable(avg.LE)
knitr::kable(avg.LE, digits=0, col.names=c("Continent","Year Range","Mean Life Expectancy"))
knitr::kable(avg.LE, digits=4, col.names=c("Continent","Year Range","Mean Life Expectancy"))
knitr::kable(avg.LE, digits=2, col.names=c("Continent","Year Range","Mean Life Expectancy"))
knitr::kable(avg.LE, digits=1, col.names=c("Continent","Year Range","Mean Life Expectancy"))
avg.LE
format(avg.LE$year.bin, digits=4)
format(avg.LE$year.bin, digits=5)
seq(1950,2010,10)
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10), labels=c("1","2","3","4","5","6","7")))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10), labels=c("1","2","3","4","5","6")))
gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10),
labels=c("1950-1960","1961-1970","1971-1980","1981-1990","1991-2000","2001-2010"))) %>%
group_by(continent, year.bin) %>%
summarise(avg.le= mean(lifeExp))
apminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10),
labels=c("1950-1959","1960-1969","1970-1979","1980-1989","1990-1999","2000-2010"))) %>%
group_by(continent, year.bin) %>%
summarise(avg.le= mean(lifeExp))
avg.LE <- gapminder %>%
mutate(year.bin= cut(year, breaks=seq(1950,2010,10),
labels=c("1950-1959","1960-1969","1970-1979","1980-1989","1990-1999","2000-2010"))) %>%
group_by(continent, year.bin) %>%
summarise(avg.le= mean(lifeExp))
knitr::kable(avg.LE, digits=1, col.names=c("Continent","Year Range","Mean Life Expectancy"))
gapminder
weighted.mean(gapminder$lifeExp, gapminder$pop)
filter(gapminder, continent=="Asia")
gapminder %>%
filter(continent=="Asia") %>%
mutate(wm.lifeExp=weighted.mean(lifeExp, pop)
gapminder %>%
filter(continent=="Asia") %>%
mutate(wm.lifeExp=weighted.mean(lifeExp, pop))
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
mutate(wm.lifeExp=weighted.mean(lifeExp, pop))
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
summarise(wm.lifeExp=weighted.mean(lifeExp, pop))
gapminder %>%
filter(continent=="Asia") %>%
group_by(country)
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
ggplot(aes(x=pop, y=lifeExp)) + geom_point()
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
ggplot(aes(x=log10(pop), y=lifeExp)) + geom_point()
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
ggplot(aes(x=log10(pop), y=lifeExp)) + geom_point(aes(fill=country))
gapminder %>%
filter(continent=="Asia") %>%
group_by(country) %>%
ggplot(aes(x=log10(pop), y=lifeExp)) + geom_point(aes(colour=country))
gapminder %>%
filter(continent=="Asia")
gapminder %>%
filter(continent=="Asia") %>%
summarise(weighted.mean(lifeExp, pop))
gapminder %>%
filter(continent=="Asia") %>%
group_by(country, year) %>%
summarise(weighted.mean(lifeExp, pop)
gapminder %>%
filter(continent=="Asia") %>%
group_by(country, year) %>%
summarise(weighted.mean(lifeExp, pop))
gapminder %>%
filter(continent=="Asia") %>%
group_by(year) %>%
summarise(mean(lifeExp))
gapminder %>%
filter(continent=="Asia") %>%
group_by(year) %>%
summarise(mean(lifeExp), mean(gdpPercap))
le.gdp <- gapminder %>%
filter(continent=="Asia") %>%
group_by(year) %>%
summarise(mean(lifeExp), mean(gdpPercap))
knitr::kable(le.gdp, digits=1, col.names=c("Year","Mean Life Expectancy","Mean Per Capita GDP"))
knitr::kable(le.gdp, digits=1, col.names=c("Year","Mean Life Expectancy","Mean Per Capita GDP"))
le.gdp <- gapminder %>%
filter(continent=="Asia") %>%
group_by(year) %>%
summarise(m.LE=mean(lifeExp), m.GDP=mean(gdpPercap))
le.gdp
knitr::kable(le.gdp, digits=1, col.names=c("Year","Mean Life Expectancy","Mean Per Capita GDP"))
ggplot(gapminder, aes(gdpPercap, lifeExp)) +
geom_point() +
geom_smooth(method="lm") +
scale_x_log10()
fit1 <- lm(lifeExp ~ log(gdpPercap), data=gapminder)
fit1
typeof(fit1)
fit1_small <- lm(lifeExp ~ log(gdpPercap), data=head(gapminder))
lapply(fit1_small, identity)
predict(fit1) %>% head
qplot(log(gapminder$gdpPercap), predict(fit1))
ggplot(gapminder, aes(gdpPercap, lifeExp)) +
geom_point(alpha=0.1) +
geom_point(y=predict(fit1), colour="red") +
scale_x_log10()
(my_newdata <- data.frame(gdpPercap=c(100, 547, 289)))
predict(fit1, newdata=my_newdata)
predict(fit1, newdata=filter(gapminder, country=="Canada"))
fit1$coefficients
coef(fit1)
fit1$residuals %>% head
resid(fit1) %>% head
qplot(log(gapminder$gdpPercap), resid(fit1)) +
geom_hline(yintercept=0,
linetype="dashed")
(summ_fit1 <- summary(fit1))
summ_fit1_small <- summary(fit1_small)
typeof(summ_fit1_small)
lapply(summ_fit1_small, identity)  # Pry it open!!
summ_fit1$r.squared
summ_fit1$adj.r.squared
summ_fit1$sigma
gapminder %>%
group_by(continent) %>%
summarize(mean_gdpPercap = mean(gdpPercap),
n_countries    = length(gdpPercap))
gapminder %>%
group_by(country) %>%
mutate(pop_growth = pop - pop[1])
gapminder %>%
group_by(country) %>%
mutate(pop_growth = pop - pop[year==1972])
p1 <- ggplot(gapminder, aes(gdpPercap, lifeExp)) +
facet_wrap(~ continent) +
geom_point(colour="#386CB0", alpha=0.2) +
scale_x_log10()
p1 + theme_bw()
## Correct:
p1 +
theme_bw() +
theme(strip.background = element_rect(fill="orange"),
axis.title = element_text(size=14),
strip.text = element_text(size=14, face="bold"))
## Incorrect:
p1 +
theme(strip.background = element_rect(fill="orange"),
axis.title = element_text(size=14),
strip.text = element_text(size=14, face="bold")) +
theme_bw()  # Overrides the previous `theme` call!
p1 + scale_y_continuous(position="right")
p2 + theme(legend.position = "bottom")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) + geon_point()
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) + geom_point()
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + stat_smooth(method="loess")
le.gdp
melt(le.gdp, id="year")
le.gdp
ggplot(le.gdp, aes(x=year)) +
geom_point(aes(y=m.LE)) + stat_smooth(method="loess")
ggplot(le.gdp, aes(x=year)) +
geom_point(aes(y=m.LE)) + geom_point(aes(y=m.GDP))
ggplot(le.gdp, aes(x=year)) +
geom_point(aes(y=m.LE)) + geom_point(aes(y=log10(m.GDP)))
ggplot(le.gdp, aes(x=year)) +
geom_point(aes(y=m.LE))
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=Year),hjust=0, vjust=0) +
stat_smooth(method="loess")
le.gdp
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=0, vjust=0) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year)) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=1, vjust=1) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=1.5, vjust=0) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=1.25, vjust=0) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=1.1, vjust=0) +
stat_smooth(method="loess")
ggplot(le.gdp, aes(x=m.GDP, y=m.LE)) +
geom_point() + geom_text(aes(label=year),hjust=1.1, vjust=0) +
stat_smooth(method="loess") +
ylab("Life Expectancy") + xlab("Per Capita GDP") + theme_bw()
gapminder %>%
group_by(country) %>%
mutate(lg_gdp=lag(gdpPercap)) %>%
filter(!is.na(lg_gdp))
